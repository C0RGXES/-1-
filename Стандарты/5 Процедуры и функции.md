
# Процедуры и функции

## Избегаем дублирования

### Не изобретаем велосипед

Знаем возможности БСП (библиотека стандартных подсистем) и используем по максимуму в своей работе

```bsl
// Например если нам нужно передать таблицу значений с сервера 
// на клиент с помощью преобразования её в массив структур
// ...
МассивДляПередачи = Новый Массив;
Для каждого Строки Из ТаблицаЗначений Цикл
    Структура("<описание колонок>", <пер1, пер2...>)
КонецЦикла;

Возврат МассивДляПередачи;

// ...
// Здесь можно просто вызвать функцию БСП
// ...
Возврат ОбщегоНазначения.ТаблицаЗначенийВМассив(ТаблицаЗначений);
// ...
```

*Так же стараемся быть в курсе последних изменений в своих библиотеках и перед разработкой какого-то алгоритма интересоваться, не написал ли его кто-то до нас

## Дробление больших участков

Каждая функция должна выполнять одну маленькую смысловую задачу, а в процедурах мы описываем процесс в целом. Однако не стоит увлекаться и слишком сильно дробить код (для каждой строки кода не нужно создавать отдельную функцию, нужно разделять их по смыслу)

```bsl
// Неправильно
Процедура ОченьКрутаяПроцедура()

    // Выполняю расчет 1
    Переменная1 = 2 + 2;
    // ...
    // Выполняю расчет 2
    Переменная2 = Переменная1 * Переменная1;
    // ...

КонецПроцедуры

// Правильно
Процедура ОченьКрутаяПроцедура()

    // Можно вынести сложный алгоритм расчета для переменной 
    // в отдельную функцию
    Переменная1 = Расчет1(2, 2);
    Переменная2 = Расчет2(Переменная1, Переменная1);

КонецПроцедуры
```

Дробление так же может иметь и функциональный смысл. Например когда мы хотим выделить какую-то часть функционала, предполагаю в дальнейшем, что он может пригодится в других местах (например вынести в общий модуль функцию для преобразования строки в дату). Так мы формируем базу для наших будущих доработок и в дальнейшем не нужно будет изобретать велосипед, а просто использовать уже готовое решение. [Подробнее](https://its.1c.ru/db/v8std#content:440:hdoc) у 1С на эту тему

## Имена

1. Название функции должно максимально понятно говорить о том, что функции возвращает. [Подробнее](https://its.1c.ru/db/v8std/content/647/hdoc) у 1С на эту тему
2. Название функции должно быть глаголом
3. В функции не должно быть ничего, кроме самого действия и поддействий, неразрывно связанных с ним ([Подробнее](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B1%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D1%8D%D1%84%D1%84%D0%B5%D0%BA%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)));
4. Название функции не должно содержать слово "Получить" (ключевое слово `Функция` и так подразумевает, что будет получено какое-то значение)

```bsl
// Пользовательские сообщения стоит выводить в головной процедуре, а не в используемых функциях

// Неправильно
Процедура ОченьКрутаяПроцедура()

    // В процедуре мы описываем основную логику работы но в данном участке
    // мы не видим, что функция Расчет1() дополнительно выведет сообщение
    Переменная1 = Расчет1(2, 2);
    // ...

КонецПроцедуры

Функция Расчет1(Перем1, Перем2)

    // Расчет
    // ...
    Если Результат >= 3 Тогда
        Сообщить("Всё пропало");
    КонецЕсли;

    Возврат Результат;

КонецФункции

// Правильно
Процедура ОченьКрутаяПроцедура()

    // Вся логика удобно прослеживается из одной процедуры
    // и никаких неожиданностей
    Переменная1 = Расчет1(2, 2);
    Если Переменная1 >= 3 Тогда
        Сообщить("Всё пропало");
    КонецЕсли;
    // ...

КонецПроцедуры
```

## Комментарии

1. Все экспортируемые процедуры и функции (так называемый программный интерфейс) должны содержать комментарий с кратким описанием действия, описанием принимаемых параметров, а для функции так же и возвращаемым значением. [Подробнее](https://its.1c.ru/db/v8std/content/453/hdoc) у 1С на эту тему
2. Внутри процедур и функций не должно быть закомментированных участков кода
3. Дополнительные комментарии допускаем, но только в качестве пояснения к несовсем очевидной работе функционала. Хороший комментарий в коде - это хорошо написанный код.
4. Допускаются так же служебные комментарии для IDE (например `// @skip-warning` в 1С:EDT, который пропускает сообщение проверки)

## Обработчики событий

Правильно используем признак ОбменДанными.Загрузка в обработчиках объектов. [Подробнее](https://its.1c.ru/db/v8std/content/773/hdoc) у 1С на эту тему.

Навигация:

| [Начало](../README.md) |
[Модули](./1%20Модули.md) |
[Переменные](./2%20Переменные.md) |
[Логические выражения](./3%20Логические%20выражения.md) |
[Обработка исключений](./4%20Обработка%20исключений.md) |
[Процедуры и функции](./5%20Процедуры%20и%20функции.md) |
[Безопасный код](./6%20Безопасный%20код.md) |
[Совместная разработка](./7%20Совместная%20разработка.md) |
[Стиль кодирования](/%D0%A1%D1%82%D0%B8%D0%BB%D1%8C%20%D0%BA%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.md) |
